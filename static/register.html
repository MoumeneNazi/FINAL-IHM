<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Register</title>
    <link rel="stylesheet" href="/static/styles.css">
    <style>.auth-card{max-width:520px;margin:32px auto;padding:18px}</style>
</head>
<body class="matt-bg">
    <main class="card auth-card matt-card">
        <h2 class="muted-title">Create account</h2>
        <p class="muted">Fields marked * are required. You will register as a regular user.</p>
        <form id="registerForm">
            <label>Full name *<br><input type="text" name="full_name" placeholder="Full Name" required></label>
            <label style="display:block;margin-top:8px;">Username *<br><input type="text" name="username" placeholder="Username" required></label>
            <label style="display:block;margin-top:8px;">Email *<br><input type="email" name="email" placeholder="Email" required></label>
            <label style="display:block;margin-top:8px;">Password *<br><input type="password" name="password" placeholder="Password" required></label>
            <div class="actions" style="margin-top:12px;">
                <button type="submit" class="btn">Register</button>
                <a href="/" class="btn ghost">Back to login</a>
            </div>
        </form>
    </main>

    <script>
        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const response = await fetch('/register', { method: 'POST', body: formData });
            const data = await response.json();
            if (response.ok) {
                alert(data.message);
                window.location.href = '/';
            } else {
                alert(data.detail || 'Registration failed');
            }
        });
    </script>
</body>
</html>